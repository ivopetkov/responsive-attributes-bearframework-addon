<?php

/*
 * Responsive attributes addon for Bear Framework
 * https://github.com/ivopetkov/responsive-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var responsiveAttributes=void 0!==responsiveAttributes?responsiveAttributes:function(){var e=[],t=function(t){if(void 0===e[t]){for(var r=t.split(","),i=r.length,n={},a=0;a<i;a++){var o=r[a].split("=>");if(void 0!==o[0]&&void 0!==o[1]){var u=o[0].trim();if(u.length>0){var s=o[1].split("=");if(void 0!==s[0]){var v=s[0].trim();if(v.length>0){var l=void 0!==s[1]?s[1].trim():"";void 0===n[v]&&(n[v]=[]),n[v].push([u,l])}}}}}e[t]=n}return e[t]},r=function(e,t,r){for(var i=[],n=0;n<1e3;n++){var a="f"+i.length;if(null===(u=t.match(/f\((.*?)\)/)))break;t=t.replace(u[0],a),i.push([a,u[1]])}var o=[];for(n=0;n<1e3;n++){var u;a="q"+o.length;if(null===(u=t.match(/q\((.*?)\)/)))break;t=t.replace(u[0],a),o.push([a,u[1]])}t=t.split("vw").join(window.innerWidth).split("w").join(r.width).split("vh").join(window.innerHeight).split("h").join(r.height);for(n=i.length-1;n>=0;n--){var s=i[n];t=t.replace(s[0],s[1]+"(element,details)")}for(n=o.length-1;n>=0;n--){s=o[n];var v=null!==document.querySelector(s[1]);t=t.replace(s[0],v?"true":"false")}try{return new Function("element","details","return "+t)(e,r)}catch(e){return!1}},i=null,n=[],a=!1,o=function(){if(!a){a=!0;for(var e=document.querySelectorAll("[data-responsive-attributes]"),o=e.length,u=0;u<o;u++){var s=e[u],v=s.getBoundingClientRect(),l={width:v.width,height:v.height},d=function(e){var i=t(e);for(var n in i){for(var a=null,o=i[n],u=o.length,v=0;v<u;v++)r(s,o[v][0],l)&&(a=o[v][1]);null===a?s.removeAttribute(n):s.getAttribute(n)!==a&&s.setAttribute(n,a)}},f=s.getAttribute("data-responsive-attributes");if("*"===f)for(var h=s.attributes,c=0;c<h.length;c++){var p=h[c];0===p.name.indexOf("data-responsive-attributes-")&&d(p.value)}else d(f);null!==i&&-1===n.indexOf(s)&&(n.push(s),i.observe(s,{attributes:!0}))}a=!1}};"undefined"!=typeof MutationObserver&&(i=new MutationObserver((function(e){var t=!1;for(var r of e)"attributes"===r.type&&0===r.attributeName.indexOf("data-responsive-attributes")&&(t=!0);t&&o()})));var u=!1,s=function(){u||(u=!0,window.addEventListener("resize",o),window.addEventListener("load",o),window.addEventListener("orientationchange",o),"undefined"!=typeof MutationObserver&&new MutationObserver((function(){o()})).observe(document.querySelector("body"),{childList:!0,subtree:!0}))};return document.addEventListener("readystatechange",()=>{s(),o()}),"complete"===document.readyState&&s(),o(),{run:o}}();
EOT;
