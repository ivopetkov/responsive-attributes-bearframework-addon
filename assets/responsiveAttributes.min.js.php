<?php

/*
 * Responsive attributes addon for Bear Framework
 * https://github.com/ivopetkov/responsive-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var responsiveAttributes=void 0!==responsiveAttributes?responsiveAttributes:function(){var e=[],t=-1!==document.cookie.indexOf("ivopetkov-responsive-attributes=debug"),n=function(t){if(void 0===e[t]){for(var n=t.split(","),i=n.length,r={},o=0;o<i;o++){var a=n[o].split("=>");if(void 0!==a[0]&&void 0!==a[1]){var u=a[0].trim();if(u.length>0){var s=a[1].split("=");if(void 0!==s[0]){var l=s[0].trim();if(l.length>0){var d=void 0!==s[1]?s[1].trim():"";void 0===r[l]&&(r[l]=[]),r[l].push([u,d])}}}}}e[t]=r}return e[t]},i=function(e,t,n){for(var i=[],r=0;r<1e3;r++){var o="f"+i.length;if(null===(u=t.match(/f\((.*?)\)/)))break;t=t.replace(u[0],o),i.push([o,u[1]])}var a=[];for(r=0;r<1e3;r++){var u;o="q"+a.length;if(null===(u=t.match(/q\((.*?)\)/)))break;t=t.replace(u[0],o),a.push([o,u[1]])}t=t.split("vw").join(window.innerWidth).split("w").join(n.width).split("vh").join(window.innerHeight).split("h").join(n.height);for(r=i.length-1;r>=0;r--){var s=i[r];t=t.replace(s[0],s[1]+"(element,details)")}for(r=a.length-1;r>=0;r--){s=a[r];var l=null!==document.querySelector(s[1]);t=t.replace(s[0],l?"true":"false")}try{return new Function("element","details","return "+t)(e,n)}catch(e){return!1}},r=null,o=[],a=null,u=function(){a=!0},s=function(){if(t){var e="responsiveAttributes::run";console.time(e)}for(var a=document.querySelectorAll("[data-responsive-attributes]"),u=a.length,s=0;s<u;s++){var l=a[s],d=l.getBoundingClientRect(),v={width:d.width,height:d.height},f=function(e){var t=n(e);for(var r in t){for(var o=null,a=t[r],u=a.length,s=0;s<u;s++)i(l,a[s][0],v)&&(o=a[s][1]);null===o?l.removeAttribute(r):l.getAttribute(r)!==o&&l.setAttribute(r,o)}},c=l.getAttribute("data-responsive-attributes");if("*"===c)for(var h=l.attributes,m=0;m<h.length;m++){var p=h[m];0===p.name.indexOf("data-responsive-attributes-")&&f(p.value)}else f(c);null!==r&&-1===o.indexOf(l)&&(o.push(l),r.observe(l,{attributes:!0}))}t&&console.timeEnd(e)};(window.addEventListener("resize",u),window.addEventListener("load",u),window.addEventListener("orientationchange",u),"undefined"!=typeof MutationObserver)&&(r=new MutationObserver((function(e){var t=!1;for(var n of e)"attributes"===n.type&&0===n.attributeName.indexOf("data-responsive-attributes")&&(t=!0);t&&u()})),new MutationObserver((function(){u()})).observe(document,{childList:!0,subtree:!0}));var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},d=function(){"loading"===document.readyState&&u(),null!==a&&(s(),a=null),l(d)};return d(),document.addEventListener("readystatechange",()=>{s()}),"complete"===document.readyState&&s(),{run:s}}();
EOT;
