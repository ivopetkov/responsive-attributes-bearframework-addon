<?php

/*
 * Responsive attributes addon for Bear Framework
 * https://github.com/ivopetkov/responsive-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var responsiveAttributes=void 0!==responsiveAttributes?responsiveAttributes:function(){var t=[],e=function(e){if(void 0===t[e]){for(var i=e.split(","),n=i.length,r=[],o=0;o<n;o++){var a=i[o].split("=>");if(void 0!==a[0]&&void 0!==a[1]){var d=a[0].trim();if(d.length>0){var s=a[1].split("=");if(void 0!==s[0]&&void 0!==s[1]){var v=s[0].trim();if(v.length>0){var u=s[1].trim();u.length>0&&(void 0===r[v]&&(r[v]=[]),r[v].push([d,u]))}}}}}t[e]=r}return t[e]},i=function(t,e,i){for(var n=[],r=0;r<100;r++){var o="f"+n.length,a=e.match(/f\((.*?)\)/);if(null===a)break;e=e.replace(a[0],o),n.push([o,a[1]])}e=e.split("vw").join(window.innerWidth).split("w").join(i.width).split("vh").join(window.innerHeight).split("h").join(i.height);for(r=n.length-1;r>=0;r--){var d=n[r];e=e.replace(d[0],d[1]+"(element,details)")}try{return new Function("element","details","return "+e)(t,i)}catch(t){return!1}},n=!1,r=function(){if(!n){n=!0;for(var t=document.querySelectorAll("[data-responsive-attributes]"),r=t.length,o=0;o<r;o++){var a=t[o],d=a.getBoundingClientRect(),s={width:d.width,height:d.height},v=e(a.getAttribute("data-responsive-attributes"));for(var u in v){var l=a.getAttribute(u);null===l&&(l="");for(var h=l.length>0?l.split(" "):[],f=v[u],c=f.length,g=0;g<c;g++){for(var p=f[g][1],w=i(a,f[g][0],s),b=!1,m=h.length,A=0;A<m;A++)if(h[A]===p){w?b=!0:h.splice(A,1);break}w&&!b&&h.push(p)}var y=h.join(" ");a.getAttribute(u)!==y&&a.setAttribute(u,y)}}n=!1}},o=function(){(window.addEventListener("resize",r),window.addEventListener("load",r),window.addEventListener("orientationchange",r),"undefined"!=typeof MutationObserver)&&new MutationObserver((function(){r()})).observe(document.querySelector("body"),{childList:!0,subtree:!0})};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),{run:r}}();
EOT;
