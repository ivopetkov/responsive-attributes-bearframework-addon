<?php

/*
 * Responsive attributes addon for Bear Framework
 * https://github.com/ivopetkov/responsive-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var responsiveAttributes=void 0!==responsiveAttributes?responsiveAttributes:function(){var e=[],t=function(t){if(void 0===e[t]){for(var r=t.split(","),n=r.length,i={},a=0;a<n;a++){var o=r[a].split("=>");if(void 0!==o[0]&&void 0!==o[1]){var u=o[0].trim();if(u.length>0){var s=o[1].split("=");if(void 0!==s[0]){var v=s[0].trim();if(v.length>0){var l=void 0!==s[1]?s[1].trim():"";void 0===i[v]&&(i[v]=[]),i[v].push([u,l])}}}}}e[t]=i}return e[t]},r=function(e,t,r){for(var n=[],i=0;i<1e3;i++){var a="f"+n.length;if(null===(u=t.match(/f\((.*?)\)/)))break;t=t.replace(u[0],a),n.push([a,u[1]])}var o=[];for(i=0;i<1e3;i++){var u;a="q"+o.length;if(null===(u=t.match(/q\((.*?)\)/)))break;t=t.replace(u[0],a),o.push([a,u[1]])}t=t.split("vw").join(window.innerWidth).split("w").join(r.width).split("vh").join(window.innerHeight).split("h").join(r.height);for(i=n.length-1;i>=0;i--){var s=n[i];t=t.replace(s[0],s[1]+"(element,details)")}for(i=o.length-1;i>=0;i--){s=o[i];var v=null!==document.querySelector(s[1]);t=t.replace(s[0],v?"true":"false")}try{return new Function("element","details","return "+t)(e,r)}catch(e){return!1}},n=null,i=[],a=!1,o=function(){if(!a){a=!0;for(var e=document.querySelectorAll("[data-responsive-attributes]"),o=e.length,u=0;u<o;u++){var s=e[u],v=s.getBoundingClientRect(),l={width:v.width,height:v.height},d=function(e){var n=t(e);for(var i in n){for(var a=null,o=n[i],u=o.length,v=0;v<u;v++)r(s,o[v][0],l)&&(a=o[v][1]);null===a?s.removeAttribute(i):s.getAttribute(i)!==a&&s.setAttribute(i,a)}},f=s.getAttribute("data-responsive-attributes");if("*"===f)for(var h=s.attributes,c=0;c<h.length;c++){var b=h[c];0===b.name.indexOf("data-responsive-attributes-")&&d(b.value)}else d(f);null!==n&&-1===i.indexOf(s)&&(i.push(s),n.observe(s,{attributes:!0}))}a=!1}};"undefined"!=typeof MutationObserver&&(n=new MutationObserver((function(e){var t=!1;for(var r of e)"attributes"===r.type&&0===r.attributeName.indexOf("data-responsive-attributes")&&(t=!0);t&&o()})));var u=function(){(window.addEventListener("resize",o),window.addEventListener("load",o),window.addEventListener("orientationchange",o),"undefined"!=typeof MutationObserver)&&new MutationObserver((function(){o()})).observe(document.querySelector("body"),{childList:!0,subtree:!0})};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u(),{run:o}}();
EOT;
