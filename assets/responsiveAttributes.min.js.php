<?php

/*
 * Responsive attributes addon for Bear Framework
 * https://github.com/ivopetkov/responsive-attributes-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var responsiveAttributes=void 0!==responsiveAttributes?responsiveAttributes:function(){var e=[],t=function(t){if(void 0===e[t]){for(var n=t.split(","),i=n.length,r={},a=0;a<i;a++){var o=n[a].split("=>");if(void 0!==o[0]&&void 0!==o[1]){var u=o[0].trim();if(u.length>0){var l=o[1].split("=");if(void 0!==l[0]){var s=l[0].trim();if(s.length>0){var d=void 0!==l[1]?l[1].trim():"";void 0===r[s]&&(r[s]=[]),r[s].push([u,d])}}}}}e[t]=r}return e[t]},n=function(e,t,n){for(var i=[],r=0;r<1e3;r++){var a="f"+i.length;if(null===(u=t.match(/f\((.*?)\)/)))break;t=t.replace(u[0],a),i.push([a,u[1]])}var o=[];for(r=0;r<1e3;r++){var u;a="q"+o.length;if(null===(u=t.match(/q\((.*?)\)/)))break;t=t.replace(u[0],a),o.push([a,u[1]])}t=t.split("vw").join(window.innerWidth).split("w").join(n.width).split("vh").join(window.innerHeight).split("h").join(n.height);for(r=i.length-1;r>=0;r--){var l=i[r];t=t.replace(l[0],l[1]+"(element,details)")}for(r=o.length-1;r>=0;r--){l=o[r];var s=null!==document.querySelector(l[1]);t=t.replace(l[0],s?"true":"false")}try{return new Function("element","details","return "+t)(e,n)}catch(e){return!1}},i=null,r=[],a=null,o=function(){a=!0},u=function(){for(var e=document.querySelectorAll("[data-responsive-attributes]"),a=e.length,o=0;o<a;o++){var u=e[o],l=u.getBoundingClientRect(),s={width:l.width,height:l.height},d=function(e){var i=t(e);for(var r in i){for(var a=null,o=i[r],l=o.length,d=0;d<l;d++)n(u,o[d][0],s)&&(a=o[d][1]);null===a?u.removeAttribute(r):u.getAttribute(r)!==a&&u.setAttribute(r,a)}},v=u.getAttribute("data-responsive-attributes");if("*"===v)for(var f=u.attributes,h=0;h<f.length;h++){var c=f[h];0===c.name.indexOf("data-responsive-attributes-")&&d(c.value)}else d(v);null!==i&&-1===r.indexOf(u)&&(r.push(u),i.observe(u,{attributes:!0}))}};(window.addEventListener("resize",o),window.addEventListener("load",o),window.addEventListener("orientationchange",o),"undefined"!=typeof MutationObserver)&&(i=new MutationObserver((function(e){var t=!1;for(var n of e)"attributes"===n.type&&0===n.attributeName.indexOf("data-responsive-attributes")&&(t=!0);t&&o()})),new MutationObserver((function(){o()})).observe(document,{childList:!0,subtree:!0}));var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},s=function(){"loading"===document.readyState&&o(),null!==a&&(u(),a=null),l(s)};return s(),document.addEventListener("readystatechange",()=>{u()}),"complete"===document.readyState&&u(),{run:u}}();
EOT;
